# Update time: 2024-09-03
# 需配合模块使用：
# https://raw.githubusercontent.com/JupiterH/Surge/main/Module/Anti-Ad1.sgmodule
# https://raw.githubusercontent.com/JupiterH/Surge/main/Module/General.sgmodule
# https://raw.githubusercontent.com/JupiterH/Surge/main/Module/DNS.sgmodule

[General]

dns-server = 223.5.5.5, 119.29.29.29, 2400:3200::1
bypass-tun = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32
bypass-system = true
ipv6 = true

# Hijack DNS
hijack-dns = *:53

[Proxy]
𝘿𝙄𝙍𝙀𝘾𝙏 = direct
𝙍𝙀𝙅𝙀𝘾𝙏 = reject

[Proxy Group]
⚡️𝙓𝙞𝙖𝙤 = select, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, no-alert=0, hidden=0, include-all-proxies=0
𝙎𝙩𝙧𝙚𝙖𝙢𝙞𝙣𝙜 = select, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0
𝙂𝙡𝙤𝙗𝙖𝙡 = select, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0
𝙂𝙖𝙢𝙚 = select, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0
𝙋𝙖𝙮𝙋𝙖𝙡 = select, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0
𝙏𝙞𝙠𝙏𝙤𝙠 = select, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0
# 𝙋𝙞𝙠𝙋𝙖𝙠 = select, 𝘿𝙄𝙍𝙀𝘾𝙏, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, no-alert=0, hidden=0, include-all-proxies=0
𝘼𝙙𝙤𝙗𝙚 = select, 𝘿𝙄𝙍𝙀𝘾𝙏, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝙍𝙀𝙅𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0
𝘼𝙥𝙥𝙡𝙚 = select, 𝘿𝙄𝙍𝙀𝘾𝙏, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, no-alert=0, hidden=0, include-all-proxies=0
𝙈𝙞𝙘𝙧𝙤𝙨𝙤𝙛𝙩 = select, 𝘿𝙄𝙍𝙀𝘾𝙏, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, no-alert=0, hidden=0, include-all-proxies=0
𝙁𝙞𝙣𝙖𝙡 = select, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0
🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜 = load-balance, policy-path=订阅链接, policy-regex-filter=(🇭🇰|香港|Hong|HK), update-interval=86400, timeout=2, tolerance=0, interval=600, url=http://1.1.1.1/generate_204
🇯🇵𝙅𝙖𝙥𝙖𝙣 = load-balance, policy-path=订阅链接, policy-regex-filter=(🇯🇵|日本|Japan|JP), update-interval=86400, timeout=2, tolerance=0, interval=600, url=http://1.1.1.1/generate_204
🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚 = load-balance, policy-path=订阅链接, policy-regex-filter=(🇸🇬|新加坡|Singapore|SG), update-interval=86400, timeout=2, tolerance=0, interval=600, url=http://1.1.1.1/generate_204
🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣 = load-balance, policy-path=订阅链接, policy-regex-filter=(🇨🇳|台湾|Tai|TW), update-interval=86400, timeout=2, tolerance=0, interval=600, url=http://1.1.1.1/generate_204
🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨 = load-balance, policy-path=订阅链接, policy-regex-filter=(🇺🇸|美国|States|US), update-interval=86400, timeout=2, tolerance=0, interval=600, url=http://1.1.1.1/generate_204
🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚 = select, policy-path=订阅链接, update-interval=86400, timeout=2, url=http://1.1.1.1/generate_204
🤍 = select, policy-path=订阅链接, update-interval=86400, timeout=2, url=http://1.1.1.1/generate_204

[Rule]
# 𝙎𝙪𝙧𝙜𝙚 𝘿𝘿𝙉𝙎
# 𝙔𝙤𝙪𝙩𝙪𝙗𝙚 𝙌𝙐𝙄𝘾
AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP
IP-CIDR,0.0.0.0/32,REJECT,no-resolve // 防止应用循环请求
# 𝘿𝙄𝙍𝙀𝘾𝙏
RULE-SET,https://raw.githubusercontent.com/JupiterH/Surge/main/Rule/Direct.list,DIRECT // 直连修正
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Game/GameDownload/GameDownload.list,DIRECT // 游戏下载
RULE-SET,https://raw.githubusercontent.com/JupiterH/Surge/main/Rule/Proxy.list,⚡️𝙓𝙞𝙖𝙤 // 代理修正
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Direct/Direct.list,DIRECT // 补充
# 𝘼𝙣𝙩𝙞-𝘼𝘿
RULE-SET,https://ruleset.skk.moe/List/ip/reject.conf,REJECT-DROP
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject.conf,REJECT,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject.conf,REJECT,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-no-drop.conf,REJECT-NO-DROP,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-drop.conf,REJECT-DROP,extended-matching
# 𝙋𝙧𝙤𝙭𝙮
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cn.conf,DIRECT // 𝘼𝙥𝙥𝙡𝙚中国
RULE-SET,https://raw.githubusercontent.com/JupiterH/Surge/main/Rule/AI.list,🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨,extended-matching
RULE-SET,https://raw.githubusercontent.com/LucaLin233/Luca_Conf/main/Surge/Rule/Telegram.list,🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚 // 𝙏𝙚𝙡𝙚𝙜𝙧𝙖𝙢
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Game/Game.list,𝙂𝙖𝙢𝙚 // 𝙂𝙖𝙢𝙚
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Adobe/Adobe.list,𝘼𝙙𝙤𝙗𝙚 // 𝘼𝙙𝙤𝙗𝙚
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list,𝙋𝙖𝙮𝙋𝙖𝙡 // 𝙋𝙖𝙮𝙋𝙖𝙡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list,𝘼𝙥𝙥𝙡𝙚
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,𝙈𝙞𝙘𝙧𝙤𝙨𝙤𝙛𝙩 // 𝙈𝙞𝙘𝙧𝙤𝙨𝙤𝙛𝙩
# 𝙎𝙩𝙧𝙚𝙖𝙢𝙞𝙣𝙜
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list,𝙏𝙞𝙠𝙏𝙤𝙠
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,⚡️𝙓𝙞𝙖𝙤
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/HBOAsia/HBOAsia.list,🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia_All_No_Resolve.list,𝙎𝙩𝙧𝙚𝙖𝙢𝙞𝙣𝙜
# 𝙂𝙡𝙤𝙗𝙖𝙡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_All_No_Resolve.list,𝙂𝙡𝙤𝙗𝙖𝙡
# 𝘾𝙝𝙞𝙣𝙖
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaASN/ChinaASN.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMax/ChinaMax_All_No_Resolve.list,DIRECT
RULE-SET,LAN,DIRECT
GEOIP,CN,DIRECT
# 𝙁𝙄𝙉𝘼𝙇
FINAL,𝙁𝙞𝙣𝙖𝙡,dns-failed

[URL Rewrite]
# 短链
^http:\/\/t\.cn http://sinaurl.cn 302
# 𝙂𝙤𝙤𝙜𝙡𝙚
^https?://(www\.)?google\.cn/search url 302
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302
# 𝙗𝙨𝙩𝙖𝙧 𝙞𝙣𝙩𝙡 𝙝𝙚𝙖𝙙𝙚𝙧
(^https?:\/\/app\.biliintl\.com\/(x\/)?(intl|dm|reply|history|v\d\/(fav|msgfeed)).+?)(&s_locale=zh-Hans_[A-Z]{2})(.+?)(&sim_code=\d+)(.+) $1&s_locale=zh-Hans_PH$6&sim_code=51503$8 header
(^https?:\/\/passport\.biliintl\.com\/x\/intl\/passport-login\/.+)(&s_locale=zh-Hans_[A-Z]{2})(.+)(&sim_code=\d+)(.+) $1&s_locale=zh-Hans_PH$35&sim_code=51503$5 header
# 𝘼𝙄𝘾𝙤𝙞𝙣
^http:\/\/(www.)?aicoin\.cn\/$ https://www.aicoin.com/ 302

[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
hostname = google.cn, g.cn, maps.google.cn, ditu.google.cn, aicoin.cn, aicoin.com, app.biliintl.com, passport.biliintl.com
enable = true
