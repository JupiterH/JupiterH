[General]
# 测速
internet-test-url = http://g.alicdn.com
proxy-test-url = http://1.1.1.1/generate_204
test-timeout = 2
# Wi-Fi助理
wifi-assist = true
allow-wifi-access = true
all-hybrid = false
# GeoIP
geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
disable-geoip-db-auto-update = false
# ipv6
ipv6 = true
ipv6-vif = auto
# 隐藏VPN图标
hide-vpn-icon = false
fast-switch = false
# Wi-Fi 访问
allow-hotspot-access = true
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
http-listen = 0.0.0.0
socks5-listen = 0.0.0.0
external-controller-access = 3694304@0.0.0.0:6155
# 远程控制器
http-api-tls = false
http-api-web-dashboard = true
http-api = 3694304@0.0.0.0:6166
# 兼容性
compatibility-mode = 0
# DNS
dns-server = 119.29.29.29, 223.5.5.5, system
encrypted-dns-server = h3://223.5.5.5/dns-query,https://dns.alidns.com/dns-query
doh-skip-cert-verification = true
encrypted-dns-follow-outbound-mode = false
encrypted-dns-skip-cert-verification = false
use-local-host-item-for-proxy = true
hijack-dns = *:53
read-etc-hosts = true
# Always Real IP Hosts
always-real-ip = *.lan, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com
# 日志等级
loglevel = notify
# VIF Routes
# tun-included-routes = 192.168.1.12/32
tun-excluded-routes = 239.255.255.250/32
# include-all-networks = false
# include-local-networks = false
# 排除简单主机名
exclude-simple-hostnames = true
# UDP
udp-policy-not-supported-behaviour = REJECT
udp-priority = true
# 当遇到 REJECT 策略时显示错误页
show-error-page-for-reject = true
# 跳过代理
skip-proxy = localhost, *.local, 10.0.0.0/8, 100.64.0.0/10, 127.0.0.1/32, 169.254.0.0/16, 172.16.0.0/12, 192.168.0.0/16,192.168.122.1/32, 193.168.0.1/32, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32, *.crashlytics.com, passenger.t3go.cn, captive.apple.com, seed-sequoia.siri.apple.com, sequoia.apple.com, injections.adguard.org, local.adguard.org
include-all-networks = false
# TCP Fast Open Behaviour
# TYPE: tfo-behaviour = auto
include-local-networks = false

[Replica]
hide-apple-request = false
hide-crash-reporter-request = true
hide-udp = false

[Proxy]


[Proxy Group]
⚡️Xiao = select, ✨Xiao, 🇭🇰HK, 🇨🇳TW, 🇯🇵JP, 🇸🇬SG, 🇺🇸US, 🇪🇺EU, 🤍, no-alert=0, hidden=0, include-all-proxies=0
Netflix = select, DIRECT, ⚡️Xiao, 🇭🇰HK, 🇨🇳TW, 🇯🇵JP, 🇸🇬SG, 🇺🇸US, 🇪🇺EU, 🤍, no-alert=0, hidden=0, include-all-proxies=0
Streaming = select, DIRECT, ⚡️Xiao, 🇭🇰HK, 🇨🇳TW, 🇯🇵JP, 🇸🇬SG, 🇺🇸US, 🇪🇺EU, 🤍, no-alert=0, hidden=0, include-all-proxies=0
Global = select, DIRECT, ⚡️Xiao, 🇭🇰HK, 🇨🇳TW, 🇯🇵JP, 🇸🇬SG, 🇺🇸US, 🇪🇺EU, 🤍, no-alert=0, hidden=0, include-all-proxies=0
Game = select, DIRECT, ⚡️Xiao, 🇭🇰HK, 🇨🇳TW, 🇯🇵JP, 🇸🇬SG, 🇺🇸US, 🇪🇺EU, 🤍, no-alert=0, hidden=0, include-all-proxies=0
PayPal = select, DIRECT, ⚡️Xiao, 🇭🇰HK, 🇨🇳TW, 🇯🇵JP, 🇸🇬SG, 🇺🇸US, 🇪🇺EU, 🤍, no-alert=0, hidden=0, include-all-proxies=0
Apple = select, DIRECT, ⚡️Xiao, 🇭🇰HK, 🇨🇳TW, 🇯🇵JP, 🇸🇬SG, 🇺🇸US, 🇪🇺EU, 🤍, no-alert=0, hidden=0, include-all-proxies=0
Microsoft = select, DIRECT, ⚡️Xiao, 🇭🇰HK, 🇨🇳TW, 🇯🇵JP, 🇸🇬SG, 🇺🇸US, 🇪🇺EU, 🤍, no-alert=0, hidden=0, include-all-proxies=0
🇭🇰HK = load-balance, policy-path=订阅链接, policy-regex-filter=(🇭🇰|香港|Hong|HK), interval=600, tolerance=50, update-interval=86400, persistent=1, no-alert=0, hidden=0, include-all-proxies=0
🇸🇬SG = load-balance, policy-path=订阅链接, policy-regex-filter=(🇸🇬|新加坡|Singapore|SG), interval=600, tolerance=50, update-interval=86400, persistent=1, no-alert=0, hidden=0, include-all-proxies=0
🇨🇳TW = load-balance, policy-path=订阅链接, policy-regex-filter=(🇨🇳|台湾|Tai|TW), interval=600, tolerance=50, update-interval=86400, persistent=1, no-alert=0, hidden=0, include-all-proxies=0
🇯🇵JP = load-balance, policy-path=订阅链接, policy-regex-filter=(🇯🇵|日本|Japan|JP), interval=600, tolerance=50, update-interval=86400, persistent=1, no-alert=0, hidden=0, include-all-proxies=0
🇺🇸US = load-balance, policy-path=订阅链接, policy-regex-filter=(🇺🇸|美国|States|US), interval=600, tolerance=50, update-interval=86400, persistent=1, no-alert=0, hidden=0, include-all-proxies=0
🇪🇺EU = select, policy-path=订阅链接, update-interval=86400, no-alert=0, hidden=0, include-all-proxies=0
🤍 = select, policy-path=订阅链接, update-interval=86400, no-alert=0, hidden=0, include-all-proxies=0
Final = select, DIRECT, ⚡️Xiao, 🇭🇰HK, 🇨🇳TW, 🇯🇵JP, 🇸🇬SG, 🇺🇸US, 🇪🇺EU, 🤍, no-alert=0, hidden=0, include-all-proxies=0

[Rule]
# 规则修正
DOMAIN-SUFFIX,amazon.cn,DIRECT
DOMAIN-SUFFIX,ikea.cn,DIRECT
# WARP+
RULE-SET,https://raw.githubusercontent.com/ExaAlice/Alice/main/Rule/WARP.list,✨Xiao
# 个人网站
DOMAIN-SUFFIX,xiaosiyu.top,🇸🇬SG
# ChatGPT
DOMAIN-SUFFIX,openai.com,🇺🇸US
# 高德
# DOMAIN,amdc.m.taobao.com,REJECT
# Alibaba
DOMAIN,gj.mmstat.com,DIRECT
DOMAIN,fourier.taobao.com,DIRECT
DOMAIN-KEYWORD,aliyun,DIRECT
DOMAIN-KEYWORD,alicdn,DIRECT
DOMAIN-KEYWORD,alibaba,DIRECT
# Google
AND,((PROTOCOL,UDP), (DEST-PORT,443)),REJECT-NO-DROP
AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP
# IP Check
DOMAIN,ip-api.com,⚡️Xiao
# Safari 防跳转
# DOMAIN,app-site-association.cdn-apple.com,Reject
# Boxjs 代理
DOMAIN-KEYWORD,jsdelivr.net,⚡️Xiao
# Sub-Store 的 Web 页面
DOMAIN-SUFFIX,vercel.app,⚡️Xiao
# Surge And Github 外部资源更新时发出通知
AND,((DOMAIN,raw.githubusercontent.com), (USER-AGENT,Surge*)),Global,notification-text="⭐️外部资源更新",notification-interval=3600
# 毒奶
RULE-SET,https://raw.githubusercontent.com/limbopro/Adblock4limbo/main/Adblock4limbo_surge.list,REJECT
# 广告拦截&隐私
# DOMAIN-SET,https://anti-ad.net/surge2.txt,REJECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject.conf,REJECT
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject.conf,REJECT-TINYGIF
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject_phishing.conf,REJECT
RULE-SET,https://ruleset.skk.moe/List/ip/reject.conf,REJECT-DROP
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy.list,REJECT
DOMAIN-SET,https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/Surge/Privacy/Privacy_Domain.list,REJECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Hijacking/Hijacking.list,REJECT
# 下载
RULE-SET,https://raw.githubusercontent.com/JupiterH/Surge/main/Rule/Download.list,DIRECT
# Apple
AND,((DOMAIN,iosapps.itunes.apple.com), (SCRIPT,speedLimit)),Apple
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list,Apple
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_Domain.list,Apple
# Microsoft
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,Microsoft
# Telegram
AND,((PROCESS-NAME,Telegram), (OR,((IP-CIDR,0.0.0.0/8), (IP-CIDR,224.0.0.0/4)))),REJECT
RULE-SET,https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.Telegram.list,🇸🇬SG
OR,((IP-ASN,44907,no-resolve), (IP-ASN,59930,no-resolve), (IP-ASN,62014,no-resolve), (IP-ASN,62041,no-resolve), (IP-ASN,211157,no-resolve)),🇸🇬SG
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Telegram/Telegram.list,🇸🇬SG
# Game
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Game/Game.list,Game
# PayPal
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list,PayPal
# 流媒体
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list,Netflix
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/HBOAsia/HBOAsia.list,🇨🇳TW
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/HBO/HBO.list,🇺🇸US
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia.list,Streaming
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia_Domain.list,Streaming
# Global
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy.list,Global
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_Domain.list,Global
# GeoIP China ASN
RULE-SET,https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.China.list,DIRECT
# 开源CDN加速
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/cdn.conf,⚡️Xiao
RULE-SET,https://ruleset.skk.moe/List/non_ip/cdn.conf,⚡️Xiao
# Local Area Network 局域网
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Lan/Lan.list,DIRECT
# 防止应用循环请求
IP-CIDR,0.0.0.0/32,REJECT,no-resolve
FINAL,Final,dns-failed

[URL Rewrite]
# 阻止 google.com 跳转到 google.com.hk
^https?:\/\/(www\.)?g\.cn https://www.google.com 302
^https?:\/\/(www\.)?google\.cn https://www.google.com 302
# Redirect Google Maps Service
^(http|https):\/\/(ditu|maps).google\.(cn|com) https://maps.google.com 302
# Weibo
^http:\/\/t\.cn http://sinaurl.cn 302
# 快捷搜索
^https:\/\/www\.google\.com\/search\?q=db(\+|%20)([^&]+).+ https://www.douban.com/search?q=$2 302
^https:\/\/www\.google\.com\/search\?q=wb(\+|%20)([^&]+).+ https://s.weibo.com/weibo/$2 302
^https:\/\/www\.google\.com\/search\?q=blbl(\+|%20)([^&]+).+ https://search.bilibili.com/all?keyword= 302
^https:\/\/www\.google\.com\/search\?q=ytb(\+|%20)([^&]+).+ https://www.youtube.com/results?search_query= 302
^https:\/\/www\.google\.com\/search\?q=zh(\+|%20)([^&]+).+ https://www.zhihu.com/search?q=$2 302

[Script]
# Apple下载
speedLimit = type=rule,timeout=60,script-path=speedLimit.js,argument=Group=Apple&policy=⚡️Xiao&time=15&minSpeed=15
# Notboring Weather
NotBoring = type=http-request,pattern=^https:\/\/api\.revenuecat\.com\/.+\/(receipts$|subscribers\/*),requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/JupiterH/Surge/main/Scripts/NotBoring.js
# Panel脚本
# 网络信息
net-info = type=generic,timeout=30,script-path=https://raw.githubusercontent.com/JupiterH/Surge/main/Scripts/Network-Info.js
# 连接测试
Connectivity_Test = type=generic,timeout=3,script-path=https://raw.githubusercontent.com/getsomecat/GetSomeCats/Surge/script/ConnectivityTest.js,argument=title=Connectivity Test&icon=icloud.and.arrow.down&color=#FF9F0A&server=false
# 黄历
今日黄历 = type=generic,timeout=30,script-path=https://raw.githubusercontent.com/TributePaulWalker/Profiles/main/JavaScript/Surge/wnCalendar.js
今日黄历播报 = type=cron,timeout=30,cronexp=30 7 * * *,wake-system=1,script-path=https://raw.githubusercontent.com/TributePaulWalker/Profiles/main/JavaScript/Surge/wnCalendar.js
# 订阅信息
Sub_info = type=generic,timeout=10,script-path=https://raw.githubusercontent.com/getsomecat/GetSomeCats/Surge/modules/Panel/Sub-info/Moore/Sub-info.js,script-update-interval=0,argument=url=encode订阅链接&reset_day=17&title=Kuromis&icon=tornado&color=#00FFFF
# 流媒体检测
stream-all = type=generic,timeout=15,script-path=https://raw.githubusercontent.com/Rabbit-Spec/Surge/Master/Module/Panel/Stream-All/Moore/Stream-All.js
# 节假日
节假日倒计时 = type=generic,timeout=10,script-path=https://raw.githubusercontent.com/JupiterH/Surge/main/Scripts/Timecard.js

[Panel]
# 今日黄历
今日黄历 = script-name=今日黄历,title=今日黄历,content=请刷新,style=info,update-interval=86400
# 节假日倒计时
节假日倒计时 = script-name=节假日倒计时,update-interval=600
# 订阅信息
Sub_info = script-name=Sub_info,update-interval=3600
# 网络信息
NetInfoPanel = style=info,script-name=net-info,update-interval=1
# 连接测试
Connectivity_Test = script-name=Connectivity_Test,update-interval=1
# 流媒体
stream-all = script-name=stream-all,title=流媒体解锁检测,content=请刷新面板,update-interval=3600

[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
hostname = %APPEND% api-weather.andy.works, api.revenuecat.com, *.google.com.hk, www.google.cn
ca-passphrase = 
ca-p12 = 
