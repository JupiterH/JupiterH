# Update Time: 2024-08-22
[General]
# 日志级别
loglevel = notify

# 当遇到 REJECT 策略时显示错误页
show-error-page-for-reject = true

# Wi-Fi助理
wifi-assist = false

# All Hybrid 网络并发
all-hybrid = false

# ipv6 支持
ipv6 = false
# ipv6-vif = true

# 测速
test-timeout = 2
internet-test-url = http://wifi.vivo.com.cn/generate_204
proxy-test-url = http://latency-test.skk.moe/endpoint
proxy-test-udp = www.apple.com@64.6.64.6

# GeoIP
geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
disable-geoip-db-auto-update = false

# 排除简单主机名
exclude-simple-hostnames = true

# DNS
dns-server = 223.5.5.5, 119.29.29.29, 2400:3200::1, system
# encrypted-dns-server = h3://223.5.5.5/dns-query,quic://223.5.5.5:853, h3://dns.alidns.com/dns-query
# encrypted-dns-skip-cert-verification = true

# 加密DNS
doh-skip-cert-verification = true
encrypted-dns-follow-outbound-mode = false

# Hijack DNS
hijack-dns = *:53

# 从 hosts 读取 DNS 记录
read-etc-hosts = true

# 使用 HTTPS 替代 HTTP 协议
http-api-tls = true

# 当 Wi-Fi 不是首选网络时 SSID 组策略使用默认策略
use-default-policy-if-wifi-not-primary = true

# 热点分享代理
allow-hotspot-access = true

# 远程控制器
external-controller-access = 123456@0.0.0.0:6155

# HTTP API & Web Dashboard
http-api = 123456@0.0.0.0:6166

# 开启该选项后可以通过浏览器控制 Surge：127.0.0.1:6166
http-api-web-dashboard = true

# --- Wi-Fi ACCESS ---
// Surge 可以作为一个标准的 HTTP/SOCKS5 代理服务器向 wi-Fi 网络下的其他设备提供服务器
allow-wifi-access = true
# Surge iOS - 默认 HTTP 端口号：6152，SOCKS5 端口号：6153
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
# Surge Mac - 默认 HTTP 端口号：6152，SOCKS5 端口号：6153
http-listen = 0.0.0.0
socks5-listen = 0.0.0.0

# --- 跳过代理 ---
skip-proxy = 17.0.0.0/8, 127.0.0.0/8, 169.254.0.0/16, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 162.14.0.0/16, 211.99.96.0/19, 162.159.192.0/24, 162.159.193.0/24, 162.159.195.0/24, 193.168.0.1/32, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32, fc00::/7, fe80::/10, localhost, *.local, *.crashlytics.com, seed-sequoia.siri.apple.com, sequoia.apple.com, captive.apple.com, passenger.t3go.cn, *.ccb.com, wxh.wo.cn, *.abcchina.com, *.abcchina.com.cn

# --- Always Real IP Hosts ---
always-real-ip = *.lan, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com*.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.battlenet.com.cn, *.battlenet.com, *.blzstatic.cn, *.battle.net

# 兼容模式
compatibility-mode = 0

# 隐藏VPN图标
hide-vpn-icon = false

# Surge VIF
vif-mode = auto
# tun-included-routes = 192.168.1.12/32
# tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12

# 包含所有的网络请求
include-all-networks = false

# 包含本地网络请求
include-local-networks = false

# 当节点不支持UDP时，默认fallback 到reject
udp-policy-not-supported-behaviour = REJECT

# 代理请求本地 DNS 映射
use-local-host-item-for-proxy = false

# UDP IP 防泄漏
include-apns = false

# 提高处理 UDP 流量优先级
udp-priority = true
include-cellular-services = false

# TCP Fast Open Behaviour
# tfo-behaviour = auto

[Proxy]
𝘿𝙄𝙍𝙀𝘾𝙏 = direct
𝙍𝙀𝙅𝙀𝘾𝙏 = reject

[Proxy Group]
⚡️𝙓𝙞𝙖𝙤 = select, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/black2c7/TheMagic-Icons/main/Icons/BYG.png
𝙎𝙩𝙧𝙚𝙖𝙢𝙞𝙣𝙜 = select, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/netflix.png
𝙂𝙡𝙤𝙗𝙖𝙡 = select, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Category_Networking.png
𝙂𝙖𝙢𝙚 = select, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/erdongchanyo/Game.png
𝙋𝙖𝙮𝙋𝙖𝙡 = select, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0
𝙏𝙞𝙠𝙏𝙤𝙠 = select, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/tiktok.png
𝘼𝙙𝙤𝙗𝙚 = select, 𝘿𝙄𝙍𝙀𝘾𝙏, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝙍𝙀𝙅𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0
𝘼𝙥𝙥𝙡𝙚 = select, 𝘿𝙄𝙍𝙀𝘾𝙏, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Apple.png
𝙈𝙞𝙘𝙧𝙤𝙨𝙤𝙛𝙩 = select, 𝘿𝙄𝙍𝙀𝘾𝙏, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/lige47/OneDrive.png
🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜 = smart, policy-path=订阅链接, policy-regex-filter=(🇭🇰|香港|Hong|HK), no-alert=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/erdongchanyo/HK02.png
🇯🇵𝙅𝙖𝙥𝙖𝙣 = smart, policy-path=订阅链接, policy-regex-filter=(🇯🇵|日本|Japan|JP), no-alert=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/erdongchanyo/JP.png
🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚 = smart, policy-path=订阅链接, policy-regex-filter=(🇸🇬|新加坡|Singapore|SG), no-alert=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/erdongchanyo/SG.png
🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣 = smart, policy-path=订阅链接, policy-regex-filter=(🇨🇳|台湾|Tai|TW), no-alert=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/erdongchanyo/TW.png
🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨 = smart, policy-path=订阅链接, policy-regex-filter=(🇺🇸|美国|States|US), no-alert=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/erdongchanyo/US.png
🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚 = select, policy-path=订阅链接, update-interval=86400, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/European_Union.png
🤍 = select, policy-path=订阅链接, update-interval=86400, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/erdongchanyo/Element.png
Final = select, ⚡️𝙓𝙞𝙖𝙤, 🇭🇰𝙃𝙤𝙣𝙜 𝙆𝙤𝙣𝙜, 🇯🇵𝙅𝙖𝙥𝙖𝙣, 🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚, 🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣, 🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨, 🇪🇺𝙀𝙪𝙧𝙤𝙥𝙚, 🤍, 𝘿𝙄𝙍𝙀𝘾𝙏, no-alert=0, hidden=0, include-all-proxies=0

[Rule]
# 𝙍𝙀𝙅𝙀𝘾𝙏
AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP // 𝙔𝙤𝙪𝙩𝙪𝙗𝙚 𝙐𝘿𝙋 屏蔽，防止QUIC请求速度慢
IP-CIDR,0.0.0.0/32,REJECT,no-resolve // 防止应用循环请求
# 𝘿𝙄𝙍𝙀𝘾𝙏
DOMAIN-SUFFIX,weixin.qq.com,DIRECT,extended-matching // 微信消息
RULE-SET,https://raw.githubusercontent.com/JupiterH/Surge/main/Rule/Direct.list,DIRECT // 直连修正
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Game/GameDownload/GameDownload.list,DIRECT // 游戏下载
RULE-SET,https://raw.githubusercontent.com/JupiterH/Surge/main/Rule/Proxy.list,⚡️𝙓𝙞𝙖𝙤 // 代理修正
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Direct/Direct.list,DIRECT // 补充
# 去广告
RULE-SET,https://ruleset.skk.moe/List/ip/reject.conf,REJECT-DROP
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject.conf,REJECT,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject.conf,REJECT,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-no-drop.conf,REJECT-NO-DROP,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-drop.conf,REJECT-DROP,extended-matching
# 𝙋𝙍𝙊𝙓𝙔
RULE-SET,https://ruleset.skk.moe/List/non_ip/ai.conf,🇺🇲𝙐𝙣𝙞𝙩𝙚𝙙 𝙎𝙩𝙖𝙩𝙚𝙨,extended-matching // 𝘼𝙄𝙂𝘾(𝙊𝙥𝙚𝙣𝘼𝙄等)
RULE-SET,https://raw.githubusercontent.com/LucaLin233/Luca_Conf/main/Surge/Rule/Telegram.list,🇸🇬𝙎𝙞𝙣𝙜𝙖𝙥𝙤𝙧𝙚 // 𝙏𝙚𝙡𝙚𝙜𝙧𝙖𝙢
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Bing/Bing.list,⚡️𝙓𝙞𝙖𝙤 // 𝘽𝙞𝙣𝙜
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Game/Game.list,𝙂𝙖𝙢𝙚 // 𝙂𝙖𝙢𝙚
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Adobe/Adobe.list,𝘼𝙙𝙤𝙗𝙚 // 𝘼𝙙𝙤𝙗𝙚
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list,𝙋𝙖𝙮𝙋𝙖𝙡 // 𝙋𝙖𝙮𝙋𝙖𝙡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,𝙈𝙞𝙘𝙧𝙤𝙨𝙤𝙛𝙩 // 𝙈𝙞𝙘𝙧𝙤𝙨𝙤𝙛𝙩
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cn.conf,DIRECT // 𝘼𝙥𝙥𝙡𝙚中国
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list,𝘼𝙥𝙥𝙡𝙚 // 𝘼𝙥𝙥𝙡𝙚
RULE-SET,https://raw.githubusercontent.com/Semporia/TikTok-Unlock/master/Surge/TikTok.list,𝙏𝙞𝙠𝙏𝙤𝙠 // 𝙎𝙩𝙧𝙚𝙖𝙢𝙞𝙣𝙜规则
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/HBOAsia/HBOAsia.list,🇨🇳𝙏𝙖𝙞𝙬𝙖𝙣
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia_All_No_Resolve.list,𝙎𝙩𝙧𝙚𝙖𝙢𝙞𝙣𝙜
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global_All_No_Resolve.list,𝙂𝙡𝙤𝙗𝙖𝙡 // 全球代理
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMax/ChinaMax_All_No_Resolve.list,DIRECT // 国内直连
RULE-SET,LAN,DIRECT // 𝙇𝙤𝙘𝙖𝙡 𝘼𝙧𝙚𝙖 𝙉𝙚𝙩𝙬𝙤𝙧𝙠 局域网
GEOIP,CN,DIRECT // 𝙂𝙀𝙊𝙄𝙋 𝘾𝙉直连
FINAL,Final,dns-failed

[Host]
# Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188
# Apple TestFlight
*testflight.apple.com = server:8.8.4.4

[URL Rewrite]
# 短链
^http:\/\/t\.cn http://sinaurl.cn 302
# Google
^https?://(www\.)?google\.cn/search url 302
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302
# bstar intl header
(^https?:\/\/app\.biliintl\.com\/(x\/)?(intl|dm|reply|history|v\d\/(fav|msgfeed)).+?)(&s_locale=zh-Hans_[A-Z]{2})(.+?)(&sim_code=\d+)(.+) $1&s_locale=zh-Hans_PH$6&sim_code=51503$8 header
(^https?:\/\/passport\.biliintl\.com\/x\/intl\/passport-login\/.+)(&s_locale=zh-Hans_[A-Z]{2})(.+)(&sim_code=\d+)(.+) $1&s_locale=zh-Hans_PH$35&sim_code=51503$5 header
# AICoin
^http:\/\/(www.)?aicoin\.cn\/$ https://www.aicoin.com/ 302


[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
hostname = %APPEND% google.cn, g.cn, maps.google.cn, ditu.google.cn, aicoin.cn, aicoin.com, app.biliintl.com, passport.biliintl.com
